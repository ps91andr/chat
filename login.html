<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>نموذج تسجيل دخول/اشتراك</title>
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css'>
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700;800&display=swap');

    /* تأثير المصفوفة */
    .matrix {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        color: #0f0;
        font-family: monospace;
        font-size: 16px;
        line-height: 1.2;
        text-shadow: 0 0 5px #0f0;
        z-index: -1;
        display: flex;
        justify-content: space-around;
        opacity: 0.3; /* جعل التأثير شفافاً قليلاً */
    }
    
    .matrix-column {
        display: flex;
        flex-direction: column;
    }
    
    .matrix-char {
        opacity: 0;
        animation: fade 1.5s infinite;
    }
    
    @keyframes fade {
        0% { opacity: 0; }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { opacity: 0; }
    }

    /* تصميم صفحة تسجيل الدخول الأصلي */
    * {
    	box-sizing: border-box;
    }

    body {
    	background: rgba(0, 0, 0, 0.7); /* خلفية داكنة شفافة */
    	display: flex;
    	justify-content: center;
    	align-items: center;
    	flex-direction: column;
    	font-family: 'Cairo', sans-serif;
    	height: 100vh;
    	margin: -20px 0 50px;
    }
    
    .header-image {
        width: 430px; 
        height: auto; 
        margin-bottom: 20px; 
        border-radius: 10px; 
    }

    h1 {
    	font-weight: bold;
    	margin: 0;
    }

    h2 {
    	text-align: center;
        color: white;
    }

    p {
    	font-size: 14px;
    	font-weight: 100;
    	line-height: 20px;
    	letter-spacing: 0.5px;
    	margin: 20px 0 30px;
        color: white;
    }

    span {
    	font-size: 12px;
    }

    a {
    	color: #ccc;
    	font-size: 14px;
    	text-decoration: none;
    	margin: 15px 0;
    }

    button {
    	border-radius: 20px;
    	border: 1px solid #FF4B2B;
    	background-color: #FF4B2B;
    	color: #FFFFFF;
    	font-size: 12px;
    	font-weight: bold;
    	padding: 12px 45px;
    	letter-spacing: 1px;
    	text-transform: uppercase;
    	transition: transform 80ms ease-in;
        font-family: 'Cairo', sans-serif;
    }

    button:active {
    	transform: scale(0.95);
    }

    button:focus {
    	outline: none;
    }

    button.ghost {
    	background-color: transparent;
    	border-color: #FFFFFF;
    }

    form {
    	background-color: #FFFFFF;
    	display: flex;
    	align-items: center;
    	justify-content: center;
    	flex-direction: column;
    	padding: 0 50px;
    	height: 100%;
    	text-align: center;
    }

    input {
    	background-color: #eee;
    	border: none;
    	padding: 12px 15px;
    	margin: 8px 0;
    	width: 100%;
        font-family: 'Cairo', sans-serif;
    }

    .container {
    	background-color: #fff;
    	border-radius: 10px;
      	box-shadow: 0 14px 28px rgba(0,0,0,0.25),
    			0 10px 10px rgba(0,0,0,0.22);
    	position: relative;
    	overflow: hidden;
    	width: 768px;
    	max-width: 100%;
    	min-height: 480px;
    }

    .form-container {
    	position: absolute;
    	top: 0;
    	height: 100%;
    	transition: all 0.6s ease-in-out;
    }

    .sign-in-container {
    	left: 0;
    	width: 50%;
    	z-index: 2;
    }

    .container.right-panel-active .sign-in-container {
    	transform: translateX(100%);
    }

    .sign-up-container {
    	left: 0;
    	width: 50%;
    	opacity: 0;
    	z-index: 1;
    }

    .container.right-panel-active .sign-up-container {
    	transform: translateX(100%);
    	opacity: 1;
    	z-index: 5;
    	animation: show 0.6s;
    }

    @keyframes show {
    	0%, 49.99% {
    		opacity: 0;
    		z-index: 1;
    	}

    	50%, 100% {
    		opacity: 1;
    		z-index: 5;
    	}
    }

    .overlay-container {
    	position: absolute;
    	top: 0;
    	left: 50%;
    	width: 50%;
    	height: 100%;
    	overflow: hidden;
    	transition: transform 0.6s ease-in-out;
    	z-index: 100;
    }

    .container.right-panel-active .overlay-container{
    	transform: translateX(-100%);
    }

    .overlay {
    	background: #FF416C;
    	background: -webkit-linear-gradient(to right, #FF4B2B, #FF416C);
    	background: linear-gradient(to right, #FF4B2B, #FF416C);
    	background-repeat: no-repeat;
    	background-size: cover;
    	background-position: 0 0;
    	color: #FFFFFF;
    	position: relative;
    	left: -100%;
    	height: 100%;
    	width: 200%;
      	transform: translateX(0);
    	transition: transform 0.6s ease-in-out;
    }

    .container.right-panel-active .overlay {
      	transform: translateX(50%);
    }

    .overlay-panel {
    	position: absolute;
    	display: flex;
    	align-items: center;
    	justify-content: center;
    	flex-direction: column;
    	padding: 0 40px;
    	text-align: center;
    	top: 0;
    	height: 100%;
    	width: 50%;
    	transform: translateX(0);
    	transition: transform 0.6s ease-in-out;
    }

    .overlay-left {
    	transform: translateX(-20%);
    }

    .container.right-panel-active .overlay-left {
    	transform: translateX(0);
    }

    .overlay-right {
    	right: 0;
    	transform: translateX(0);
    }

    .container.right-panel-active .overlay-right {
    	transform: translateX(20%);
    }

    .social-container {
    	margin: 20px 0;
    }

    .social-container a {
    	border: 1px solid #DDDDDD;
    	border-radius: 50%;
    	display: inline-flex;
    	justify-content: center;
    	align-items: center;
    	margin: 0 5px;
    	height: 40px;
    	width: 40px;
    }
    
    .flash-message {
        padding: 10px;
        margin-bottom: 15px;
        border-radius: 5px;
        color: #fff;
        font-weight: 500;
        background-color: #dc3545; 
        width: 100%;
        box-sizing: border-box;
        font-size: 12px;
    }

    .password-wrapper {
        position: relative;
        width: 100%;
        margin: 8px 0;
    }

    .password-wrapper input {
        margin: 0;
        padding-left: 45px;
        text-align: right;
    }

    .toggle-password {
        position: absolute;
        top: 50%;
        left: 15px;
        transform: translateY(-50%);
        cursor: pointer;
        color: #888;
    }

  </style>
</head>
<body>
<!-- تأثير المصفوفة -->
<div class="matrix" id="matrix"></div>

<!-- صفحة تسجيل الدخول الأصلية -->
<img src="static/loginBanner.png" alt="شعار" class="header-image">

<h2>نموذج تسجيل دخول/اشتراك</h2>
<!-- ✨ تعديل جديد: إضافة شرط لإظهار لوحة الاشتراك عند وجود أخطاء في التسجيل -->
<div class="container {% if show_register_panel %}right-panel-active{% endif %}" id="container">
	<div class="form-container sign-up-container">
		<form method="post" action="{{ url_for('register') }}">
			<h1>إنشاء حساب</h1>
            
            <!-- ✨ تعديل جديد: نقل قسم الرسائل الوامضة إلى هنا ليعمل مع كلا النموذجين -->
			{% with messages = get_flashed_messages() %}
			    {% if messages %}
			        {% for message in messages %}
			            <div class="flash-message">{{ message }}</div>
			        {% endfor %}
			    {% endif %}
			{% endwith %}

			<input type="text" placeholder="اسم المستخدم" name="username" required minlength="3" />
			<div class="password-wrapper">
				<input type="password" placeholder="كلمة المرور" name="password" required />
				<i class="fas fa-eye toggle-password"></i>
			</div>
			<div class="password-wrapper">
				<input type="password" placeholder="تأكيد كلمة المرور" name="password_confirm" required />
				<i class="fas fa-eye toggle-password"></i>
			</div>
			<button type="submit">اشتراك</button>
		</form>
	</div>
	<div class="form-container sign-in-container">
		<form method="post" action="{{ url_for('login') }}">
			<h1>تسجيل الدخول</h1>
			{% with messages = get_flashed_messages() %}
			    {% if messages %}
			        {% for message in messages %}
			            <div class="flash-message">{{ message }}</div>
			        {% endfor %}
			    {% endif %}
			{% endwith %}
			<input type="text" placeholder="اسم المستخدم" name="username" required />
			<div class="password-wrapper">
				<input type="password" placeholder="كلمة المرور" name="password" required />
				<i class="fas fa-eye toggle-password"></i>
			</div>
			<a href="#">هل نسيت كلمة المرور؟</a>
			<button type="submit">تسجيل الدخول</button>
		</form>
	</div>
	<div class="overlay-container">
		<div class="overlay">
			<div class="overlay-panel overlay-left">
				<h1>مرحبا بعودتك!</h1>
				<p>للبقاء على تواصل معنا، يرجى تسجيل الدخول بمعلوماتك الشخصية</p>
				<button class="ghost" id="signIn">تسجيل الدخول</button>
			</div>
			<div class="overlay-panel overlay-right">
				<h1>مرحباً يا صديقي!</h1>
				<p>أدخل تفاصيلك الشخصية وابدأ رحلتك معنا</p>
				<button class="ghost" id="signUp">اشتراك</button>
			</div>
		</div>
	</div>
</div>

<script>
    // إنشاء تأثير المصفوفة
    const matrixContainer = document.getElementById('matrix');
    const chars = "طه شات Таха Чат 塔哈聊天 タハチャット 타하 채팅 Taha Sohbet طه چت طہ چیٹ ताहा चैट তাহা চ্যাট Obrolan Taha ทาฮาแชท Trò chuyện Taha Czat Taha Чат Таха Τσατ Ταχα טאהה צ'אט Maongezi ya Taha ጋዜጣ ታሀ ටාහා සංවාදය താഹ ചാറ്റ് தாஹா சாட் Usapang Taha Sembang Taha Таха Чат Taha Chat  تاها چات Таха Чат Таха Чат ტაჰა ჩეთი Տահա Չաթ ការសន្ទនា Taha ສົນທະນາ Taha Taha စကားပြော طه شات Таха Чат 塔哈聊天 タハチャット 타하 채팅 Taha Sohbet طه چت طہ چیٹ ताहा चैट তাহা চ্যাট Obrolan Taha ทาฮาแชท Trò chuyện Taha Czat Taha Чат Таха Τσατ Ταχα טאהה צ'אט Maongezi ya Taha ጋዜጣ ታሀ ටාහා සංවාදය താഹ ചാറ്റ് தாஹா சாட் Usapang Taha Sembang Taha Таха Чат Taha Chat  تاها چات Таха Чат Таха Чат ტაჰა ჩეთი Տահա Չաթ ការសន្ទនា Taha ສົນທະນາ Taha Taha စကားပြော طه شات Таха Чат 塔哈聊天 タハチャット 타하 채팅 Taha Sohbet طه چت طہ چیٹ ताहा चैट তাহা চ্যাট Obrolan Taha ทาฮาแชท Trò chuyện Taha Czat Taha Чат Таха Τσατ Ταχα טאהה צ'אט Maongezi ya Taha ጋዜጣ ታሀ ටාහා සංවාදය താഹ ചാറ്റ് தாஹா சாட் Usapang Taha Sembang Taha Таха Чат Taha Chat  تاها چات Таха Чат Таха Чат ტაჰა ჩეთი Տահա Չաթ ការសន្ទនា Taha ສົນທະນາ Taha Taha စကားပြော Таха Чат 塔哈聊天 タハチャット 타하 채팅 Taha Sohbet طه چت طہ چیٹ ताहा चैट তাহা চ্যাট Obrolan Taha ทาฮาแชท Trò chuyện Taha Czat Taha Чат Таха Τσατ Ταχα טאהה צ'אט Maongezi ya Taha ጋዜጣ ታሀ ටාහා සංවාදය താഹ ചാറ്റ് தாஹா சாட் Usapang Taha Sembang Taha Таха Чат Taha Chat  تاها چات Таха Чат Таха Чат ტაჰა ჩეთი Տահա Չաթ ការសន្ទនា Taha ສົນທະນາ Taha Taha စကားပြော طه شات Таха Чат 塔哈聊天 タハチャット 타하 채팅 Taha Sohbet طه چت طہ چیٹ ताहा चैट তাহা চ্যাট Obrolan Taha ทาฮาแชท Trò chuyện Taha Czat Taha Чат Таха Τσατ Ταχα טאהה צ'אט Maongezi ya Taha ጋዜጣ ታሀ ටාහා සංවාදය താഹ ചാറ്റ് தாஹா சாட் Usapang Taha Sembang Taha Таха Чат Taha Chat  تاها چات Таха Чат Таха Чат ტაჰა ჩეთი Տահա Չաթ ការសន្ទនា Taha ສົນທະນາ Taha Taha စကားပြော 塔哈聊天 タハチャット 타하 채팅 Taha Sohbet طه چت طہ چیٹ ताहा चैट তাহা চ্যাট Obrolan Taha ทาฮาแชท Trò chuyện Taha Czat Taha Чат Таха Τσατ Ταχα טאהה צ'אט Maongezi ya Taha ጋዜጣ ታሀ ටාහා සංවාදය താഹ ചാറ്റ് தாஹா சாட் Usapang Taha Sembang Taha Таха Чат Taha Chat  تاها چات Таха Чат Таха Чат ტაჰა ჩეთი Տահա Չաթ ការសន្ទនា Taha ສົນທະນາ Taha Taha စကားပြော طه شات Таха Чат 塔哈聊天 タハチャット 타하 채팅 Taha Sohbet طه چت طہ چیٹ ताहा चैट তাহা চ্যাট Obrolan Taha ทาฮาแชท Trò chuyện Taha Czat Taha Чат Таха Τσατ Ταχα טאהה צ'אט Maongezi ya Taha ጋዜጣ ታሀ ටාහා සංවාදය താഹ ചാറ്റ് தாஹா சாட் Usapang Taha Sembang Taha Таха Чат Taha Chat  تاها چات Таха Чат Таха Чат ტაჰა ჩეთი Տահա Չաթ ការសន្ទនា Taha ສົນທະນາ Taha Taha စကားပြော";
 
    for (let i = 0; i < 100; i++) {
        const column = document.createElement('div');
        column.classList.add('matrix-column');
        for (let j = 0; j < 100; j++) {
            const char = document.createElement('div');
            char.classList.add('matrix-char');
            char.textContent = chars[Math.floor(Math.random() * chars.length)];
            char.style.animationDelay = `${Math.random() * 5}s`;
            column.appendChild(char);
        }
        matrixContainer.appendChild(column);
    }

    // كود تبديل النماذج الأصلي
    const signUpButton = document.getElementById('signUp');
    const signInButton = document.getElementById('signIn');
    const container = document.getElementById('container');

    signUpButton.addEventListener('click', () => {
    	container.classList.add("right-panel-active");
    });

    signInButton.addEventListener('click', () => {
    	container.classList.remove("right-panel-active");
    });

    // شيفرة إظهار وإخفاء كلمة المرور
    const togglePasswordIcons = document.querySelectorAll('.toggle-password');
    togglePasswordIcons.forEach(icon => {
        icon.addEventListener('click', function() {
            const passwordInput = this.previousElementSibling;
            const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
            passwordInput.setAttribute('type', type);
            this.classList.toggle('fa-eye');
            this.classList.toggle('fa-eye-slash');
        });
    });
</script>

</body>
</html>